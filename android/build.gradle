// ==============================================================================
// ğŸš€ LIQUID SNAP GLASS - ROOT GRADLE (ULTRA-STABLE EDITION)
// ğŸ“… UPDATED: 2026-02-14
// ğŸ›¡ï¸ REASON: Fixing "already evaluated" error & forcing API 34 compatibility
// ==============================================================================

buildscript {
    // ğŸš€ Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø± ÙƒÙˆØªÙ„ÙŠÙ† Ù„Ø¹Ø§Ù… 2026 (K2 Compiler)
    ext.kotlin_version = '2.3.10'
    
    repositories {
        google()
        mavenCentral()
    }

    dependencies {
        // âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… 8.7.3 Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Gradle 9 ÙˆØ§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª
        classpath 'com.android.tools.build:gradle:8.7.3'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

// ğŸ“‚ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡
rootProject.buildDir = '../build'
subprojects {
    project.buildDir = "${rootProject.buildDir}/${project.name}"
}

// ==============================================================================
// ğŸ”¥ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø¸ÙˆØ±Ø© (The Ultimate Fix Zone) ğŸ”¥
// ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ afterEvaluate Ø¨Ù€ plugins.matching Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Gradle 9
// Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¶Ù…Ù† Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© connectivity_plus ÙˆÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØºØµØ¨ Ø¹Ù†Ù‡Ø§
// ==============================================================================
subprojects {
    project.plugins.matching { it.class.name.contains('com.android.build.gradle') }.all {
        project.android {
            // 1. Ø¥Ø¬Ø¨Ø§Ø± Ø§Ø³Ù… Ø§Ù„Ø­Ø²Ù…Ø© Ù„Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„ØªÙŠ ØªÙØªÙ‚Ø¯ Ù„Ù€ Namespace
            if (namespace == null) {
                namespace project.group
            }

            // 2. ØªÙˆØ­ÙŠØ¯ Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± (Modern Stable)
            compileSdkVersion 34
            buildToolsVersion "34.0.0"
            
            defaultConfig {
                minSdkVersion 23
                targetSdkVersion 34
            }

            // 3. Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Java 17 (Ø§Ù„Ù…ØªØ·Ù„Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
            compileOptions {
                sourceCompatibility JavaVersion.VERSION_17
                targetCompatibility JavaVersion.VERSION_17
            }
        }
    }
}

subprojects {
    project.evaluationDependsOn(':app')
}

// ğŸ§¹ Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ
tasks.register("clean", Delete) {
    delete rootProject.buildDir
}
